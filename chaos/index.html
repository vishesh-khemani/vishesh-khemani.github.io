<html>
<head>
  <script src="https://www.gstatic.com/charts/loader.js"></script>
  <script src="https://unpkg.com/mathjs/lib/browser/math.js"></script>
  <script src="chaos.js"></script>
</head>
<body>
  <div id='chart_div'></div>
 <script>

  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(drawChart);
  function drawChart() {
    let data = new google.visualization.DataTable();
    data.addColumn('number', 'r');
    data.addColumn('number', 'x');

   let x0 = math.fraction(1, 2);
   for (let numerator = 2500; numerator < 4000; numerator++) {
     let r = math.fraction(numerator, 1000);
     let x0 = math.fraction(1, 3);
     let seq = iterate(1000, r, x0).slice(-100);
     for (let i = 0; i < seq.length; ++i) {
       data.addRow([r.valueOf(), seq[i]]);
     }
   }
   for (let numerator = 500; numerator < 510; numerator++) {
     let r = math.fraction(37, 10);
     let x0 = math.fraction(numerator, 1_000);
     let seq = iterate(1000, r, x0).slice(-8);
     console.log(`${x0.valueOf().toFixed(4)}: ${seq}`);
   }
   var options = {
          title: 'Terminal Values',
          hAxis: {title: 'r', minValue: 1, maxValue: 4},
          vAxis: {title: 'x', minValue: 0, maxValue: 1},
          width: 640,
          height: 1280,
          pointSize: 1,
          legend: 'none'
        };

    let chart = new google.visualization.ScatterChart(
      document.getElementById('chart_div'));

    chart.draw(data, options);
  }
 </script>
</body>
</html>
